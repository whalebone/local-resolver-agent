version: '3'
services:
  lr-agent:
    image: harbor.whalebone.io/whalebone/agent:testing-1
    name: lr-agent
    stdin_open: true
    tty: true
    network_mode: host
    labels:
        lr-agent: "2.0"
    environment:
      WHALEBONE_CLIENT_CRT_BASE64: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZPRENDQXlDZ0F3SUJBZ0lDRUFFd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z1lVeEN6QUpCZ05WQkFZVEFrTmEKTVJjd0ZRWURWUVFJREE1RGVtVmphQ0JTWlhCMVlteHBZekVaTUJjR0ExVUVDZ3dRVjJoaGJHVmliMjVsSUhNdQpjaTV2TGpFZ01CNEdBMVVFQ3d3WFZHVnpkR2x1WnlCcGJuUmxjbTFsWkdsaGRHVWdRMEV4SURBZUJnTlZCQU1NCkYxUmxjM1JwYm1jZ2FXNTBaWEp0WldScFlYUmxJRU5CTUI0WERURTRNREl3TnpFNU5ESXpNbG9YRFRJNE1ESXcKTlRFNU5ESXpNbG93Y0RFTE1Ba0dBMVVFQmhNQ1Exb3hGekFWQmdOVkJBZ01Ea042WldOb0lGSmxjSFZpYkdsagpNUmt3RndZRFZRUUtEQkJYYUdGc1pXSnZibVVnY3k1eUxtOHVNUjh3SFFZRFZRUUxEQlpNYjJOaGJDQnlaWE52CmJIWmxjaUJoWjJWdWRDQXhNUXd3Q2dZRFZRUUREQU14TURFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFEQ0FTRlZ4YjNUbzNIZk1ScjM1a2NueVpoc3BzTUhacXZMZ0ZpSXVSc3hjQUhRR2MragpoWGF5UzU4ZGhzQWw0by9Hdk5yaWUreVZVQ0cyeDF2eHlTSWp3dWE3c2w0TW1haFJJcUYwUFNhMVo4ZjlLSWtzClNKZk0wRHloUThVT0V2bGR2T1dEMitHTzlBZTVBbXVzT3JsNk9QUTNZR0FDdUN5akhINUdkR29kUStkOHEvZVcKMk9XeThjS2g2MnNZUlErc0lFa0hQb0Y4NXJadjFlV0YzYmlwdStRbHM3QVJod3JtalVxZnF0MDlsZm9qaW01RApBN0dEaXVjRTVnYTVFZ1ZYTjROTFZtbk1HSHFJL2xrSjRhR2NQTEQvSDdTSWI1THV3S3h5MWhBUUc1MXFudStjCnZ5RktKK1k5c1hxOC9zWDRDMDNvZWdYdHgwbkh1YzZmdXR2eEFnTUJBQUdqZ2NVd2djSXdDUVlEVlIwVEJBSXcKQURBUkJnbGdoa2dCaHZoQ0FRRUVCQU1DQmFBd013WUpZSVpJQVliNFFnRU5CQ1lXSkU5d1pXNVRVMHdnUjJWdQpaWEpoZEdWa0lFTnNhV1Z1ZENCRFpYSjBhV1pwWTJGMFpUQWRCZ05WSFE0RUZnUVVFRG5nbEJ6b2MxZUFZV2I1CnRNTjNzeUx4b09Zd0h3WURWUjBqQkJnd0ZvQVVmQWdoWkJzaWx1ekgwR2Uycms3T2Y0OVJBQkF3RGdZRFZSMFAKQVFIL0JBUURBZ1hnTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQ0JnZ3JCZ0VGQlFjREJEQU5CZ2txaGtpRwo5dzBCQVFzRkFBT0NBZ0VBT0hxYnpUdnk4Qjh3NmY0YU9NZEtSbm9MZW5xTWhoZ21iRkJaTVBkelNNbW5yK0ZJCkg3SklHNjgzT09YNmE5SDZZb0lGT3RWTnhlYXc3SGpXYmh3OVJyYVZKUVRvdUMyWlBZYStYYjVwZG9FalFrSGYKY3FEbWNKTUJrYU1rN21pOForMVVscUJYYzhNR1d3SjhGVG93RE82MFVXNm9sMjN4VzBmWWNNZGpXZW9PbDltWgppSjZYMVRyWEEzd0wydnk3ZTJpNHRldm03dlp6d2FXYjlxNEFjbXo4NDV2MGhtY29sTWw3YU9PQk5MRkdjYzQzCkpsZE9qZllLNXlZVFVJVzdKTzNNTHI1d0NHdlk4d3dVOHh0MXN4amJUMHIzR1dFYnl3RkVac1p3b0xneTZ2N3oKalBSbjRjK1RCMmxKQWlNRU95NTMzL0dzMUJSR1lLSHE4VlNnNXg2Vi9kZGIwU2hMTDQ0YkJlTHIvVUlCb015bQpzSGxmNlhJYkdxZEJQRGVCL3ZjYWxDbXNVcGh4OWNFYUtSOUVoQ1pvL1BTOWNGUi9XUEUrbjJUdDdjdDlFN3RUCm9oMkJtTzhnTHI0RWF1TjRVbk4yR3RvYTQ0NS82WG9WMkpOTDZRYjlZQjc2NGtQOTNzYVdaQTBCKzRUWmpGdncKcTVudzZySzc5eWdXT2dPSnllZlEwSVp6VS90N1JJYUJ0N3VRS0tpQWVCeTVNU3lYMUNHM25xU0loV3dQRFhuYgpyWHVYUVJRSFgrS2RvaHYxc0ZSR3RmYVdiWVExeXJNOEw3UXV1SkVsb05maVgrenZKVkswWXJrR3JSUm9tRDVLCnl5S3Y4U3hlZTF2b1JoRGh2WmFOclAyQktXWkdmb21sSGhmeHdhaFlKMVBubDRmWElHSUsrc2FRblpFPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
      WHALEBONE_CLIENT_KEY_BASE64: "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpQcm9jLVR5cGU6IDQsRU5DUllQVEVECkRFSy1JbmZvOiBBRVMtMjU2LUNCQyw1MEE2QTIwRUQxRTAyMkU4RUQ1MUYwRDgwMzU2QUQ1NAoKWThzY2JwWDlVNk9VOFJtTWlKVTJOK3QyUmhEWWU0MkkyRXhua1NOVnF6a2VIMDgyaEx6UUtvbjBRVEpHTFFqTApnMVMxeGNia3l1Z1ZwSTM1MWtFUlZ2eHo4RUNhd2NZSUdRNTRYcjRtK1pOcjl2WXMzTnNHMHhaNnRxWGNvVDBsCkFIMmdUVDFFSjdCRStnMkJJaHA2aUM3MzN3VVNTRnY3ZjRqWTZwN1UxMzhnZ29GcDBMY1VxZDlFMTlhU1hyeloKTDVLY0ExbHYvU3g5TUJySDIvbXh4UWJlWXVBM2lzZ2IxUGxXaENhc1VYZGFvRzZ5SXRQeDFzWVU3RmNubzUxQgplNUliNkNBMzI1MkFZd3h1Sm1weUlWNDhnc1Fya2FZQm9uZ0FSbU1CRjdlSjI3cG9kemoxNS92NXVMTTRvYVlGCk42RENzTTJvQy9kTU9udzhKSjQxd2N0WjVrQnI5Qzg5dkFGaXYzWUxmQ1R6RCs3MTg0eWYzOGwvbCtwMURCSlIKZGZraHNNSDl4Tm5qOFFoZVNRQlhUUmc1eXloM0RjVDcrek5HYjJUdG5FYXpZZFpPbWxnNWg3TTNQRmovVDllbwo4YTU2VmYwTTZML2ZUanBhRVkyWkZ2WDZHNlJqRk9DL2lVb2tnNTV2cWU5bzFBNGlZVWpieGVQVHUxWFMva1BBCko5UnptbGFaUU1TZnQ0TGZlV2JISWlhTmFpWVVkbTR6V1VTT2hwaTZDNDNrY2E0QlU2N1Q0S0Evb3V2cmJBTVcKbzdHSUpXQjJ1cEQ0WmROWGtEdkdNTnJlSCtUemhFT1RjWHp6UDZrc1FYVGI0Q2NmRCs5VVV2aDMzajFPSnM3bAo1NEd4QmJZcHFpYVlQR1NReFMweTN4ZFkraGVkQlJ5MURYQzk3ZFBVb29RMTBKSmJvZDdXeERoQ25TVVhJZnc1CnVreDEzYTVQMkNScHBvcHNRbFVsMTJqNHRSb0dCYXgydE1NL0ZuNGZmaHZyLzJ2NEtKVE1Lc1NkVExIZURjdEsKYUJrN1RqZkQ3dmE2N0ZsTTJwbVpaSkFuMDlhRjEwWFA1QzkwdVZCTlc2akdjdWZNV0lDVmNERGcxZzJUamdVMwo5bnkzWWJxSDFibTF1YkhqNHJ0RDcwUjltK1ZXQ2pwYWtOblVqeFZpQWFWSWh6M20xMmdPMk84TENTNCtPV0dJCnQ4OWF4NkIyMkM3RW5hOGVCbGU3OUJTeVJPalhNTjZ2VU5GN1JtMDFFSlozdzdlWjRONkM3bFhSL0txL0JSREEKR1hjSDdXZS9ldkNSaUI5dWIvZ2NDQkR1VkZ2RmRBWk1ISzgydzZGRFBnVC96OHdpNURPV2VuZGVwREExcDFVUAp0cFZaR0VFVVpwWUZOUFJ3NUs0V2lRL3U4dkVUTnY2ajJqZkdyc0tUN3hpMTl4S1JZREgwUWZrWEU1ektpcTlXClV5MHRsbExaQmYrbTY3aGV1OTdGVldEMHEzRTFibFRlOWdwYU1tQVhkOWJycm9ERUhNR0s0MEg3N3JVUjNxdG4KRFhHOEUxUlY0SGRXRGJoR2g0a09Na3NvdzZTejlLSGIzWlBSeXJDODdFWGpoYURETklxY1Fwcm1OMnc5U253dwpscjZCS1hQeko5aEFFRmxyUlR3ZlJsa1owOWkxT1I1OStISFJ4Z0xyeDltSDJ3Q3kxTG5HK2FsWXdmY0lnVWpXCjNBYW50V3U4dVU4N2JYeVdxS1RDUmxoSG5hY3NTZDBzd1pHYUt4Q3JSbGVMQ0UrS1RtbzV4eTNiYXg5a1ZsZUIKSEdDMjFFZjF2bGlBdnlTU3FMZDQ2YnY0S0dDRFZIRW9WNC9rN1YxTlpPVnliYm5jMkduZ0d6ZUdPWmRKT3pqUQpzU0xZQkV0aDBEZmptYjBxbDYxcysrV2I5bHQxQVhmTlRnNmExam9UVXVpMFJrQ1NpVFhNWTByTS95YW0zd1JaCkFiK2Q2VlRjZ3lGSTV2bHBKYmFvY1ZuNmZXU1lWZGNXOGc0bXJGTVhVRTMwY1NKVDdLMjY4S2RpQkl3UHV5cDAKMEpkdlIwNzgxcno2UGtNT0NVemV4MDhSUXRuR09lWk84V24wUkY5dmVTTnZrdERlOE1sbzZ2QVAxVmVsbnBiUgotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="
      WHALEBONE_CLIENT_CERT_PASS: "password"
      LOGGING_LEVEL: "so much"
      LOCAL_RESOLVER_ADDRESS: 'localhost'
      WHALEBONE_PROXY_ADDRESS: "wss://localhost:443/wsproxy/ws"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /etc/whalebone/kres/:/etc/whalebone/kres/
      - /var/log/whalebone/:/etc/whalebone/log/